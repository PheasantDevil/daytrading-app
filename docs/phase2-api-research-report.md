# Phase2 API調査レポート

## 概要

Phase2の実装に向けて、日本国内外の証券会社が提供するAPIを詳細に調査し、kabuステーションAPIの代替案を検討しました。

## 調査期間

2024年12月

## 調査対象

### 日本国内の証券会社API

#### 1. 三菱UFJ eスマート証券（kabu.com API）

- **提供商品**: 株式、FX、先物
- **API料金**: 無料
- **利用条件**:
  - 口座開設が必要
  - 個人利用可能だが、自動売買開発には法人口座が必要
- **特徴**:
  - REST API形式
  - 高速発注環境
  - FX取引手数料無料
- **制約**:
  - 個人での自動売買開発に制限あり
  - Windows環境が必要（kabuステーション）

#### 2. OANDA Japan（REST API）

- **提供商品**: FX取引のみ
- **API料金**: 無料
- **利用条件**:
  - 口座残高25万円以上
  - API契約書への同意
  - 会員ステータスがGoldでプロコース
- **特徴**:
  - プラットフォーム非依存
  - 自動売買可能
  - デモ口座でもAPI利用可能
- **制約**:
  - FX取引のみ
  - 口座残高要件あり

#### 3. ウィブル証券（Open API）

- **提供商品**: 米国株、ETF
- **API料金**: 無料
- **利用条件**: 口座開設が必要
- **特徴**:
  - Python、Java SDK提供
  - 自動売買可能
  - Linux環境対応
- **制約**:
  - 米国株のみ
  - 日本株取引不可

#### 4. 立花証券（e支店API）

- **提供商品**: 日本株
- **API料金**: 無料
- **特徴**:
  - 高速処理
  - 株価・ニュース取得
- **制約**:
  - 詳細情報が限定的

### 日本国外の証券会社API

#### 1. Interactive Brokers（IB API）

- **提供商品**: 株式、オプション、先物、FX、債券
- **API料金**: 無料
- **利用条件**:
  - 口座開設が必要
  - 最低入金額要件あり
- **特徴**:
  - 多言語対応（Java、Python、C++、.NET）
  - グローバル市場対応
  - 豊富なAPIドキュメント
- **制約**:
  - 日本居住者への口座開設制限
  - 税務上の考慮が必要

#### 2. Alpaca Markets（Alpaca API）

- **提供商品**: 米国株
- **API料金**: 無料プランあり
- **特徴**:
  - REST API、WebSocket API
  - Python SDK提供
  - 手数料無料取引
- **制約**:
  - 米国株のみ
  - 日本居住者への制限

#### 3. Tradier（Tradier API）

- **提供商品**: 米国株、オプション
- **API料金**: 無料プランあり
- **特徴**:
  - アルゴリズム取引対応
  - REST API
- **制約**:
  - 米国市場のみ
  - 日本居住者への制限

### データ提供API

#### 1. J-Quants API（日本取引所グループ）

- **提供データ**: 株価、財務情報
- **料金**: 無料プランあり
- **特徴**:
  - 日本株データに特化
  - ヒストリカルデータ
- **制約**:
  - データ取得のみ
  - 取引機能なし

#### 2. Yahoo Finance API

- **提供データ**: 株価、財務情報
- **料金**: 無料
- **特徴**:
  - 広範囲な市場データ
  - リアルタイムデータ
- **制約**:
  - データ取得のみ
  - 取引機能なし
  - 制限あり

#### 3. Alpha Vantage API

- **提供データ**: 株価、FX、暗号通貨
- **料金**: 無料プランあり（制限あり）
- **特徴**:
  - 多様な市場データ
  - 技術指標
- **制約**:
  - データ取得のみ
  - 取引機能なし

#### 4. IEX Cloud API

- **提供データ**: 米国株データ
- **料金**: 無料プランあり
- **特徴**:
  - 高品質データ
  - リアルタイムデータ
- **制約**:
  - 米国株のみ
  - データ取得のみ

## 検討結果

### 実装可能性の評価

#### 高実装可能性

1. **OANDA Japan**: FX取引に特化、MacBook環境対応
2. **ウィブル証券**: 米国株取引、MacBook環境対応
3. **J-Quants API**: 日本株データ取得、MacBook環境対応

#### 中実装可能性

1. **Interactive Brokers**: グローバル対応だが日本居住者制限
2. **Alpaca Markets**: 米国株のみ、日本居住者制限

#### 低実装可能性

1. **三菱UFJ eスマート証券**: Windows環境必要
2. **Tradier**: 日本居住者制限

### 推奨方針

#### Phase2実装方針

1. **複数データソース統合**:
   - J-Quants API（日本株データ）
   - Yahoo Finance API（米国株データ）
   - Alpha Vantage API（補完データ）

2. **取引機能の実装**:
   - OANDA Japan（FX取引）
   - ウィブル証券（米国株取引）

3. **デモトレードシステムの高度化**:
   - より現実的なシミュレーション
   - 複数市場対応
   - リスク管理強化

## 結論

日本国内の証券会社APIは制約が多く、特にWindows環境を必要とするものが多いため、以下の方針でPhase2を実装します：

1. **データ取得**: 複数の無料APIを統合
2. **取引機能**: OANDA Japan（FX）とウィブル証券（米国株）を活用
3. **デモトレード**: より高度なシミュレーション環境を構築

この方針により、MacBook環境から完全にクラウドベースで運用可能なシステムを構築できます。

## 次のステップ

1. 推奨APIの詳細仕様調査
2. 実装計画の策定
3. プロトタイプの開発
4. 統合テストの実施
