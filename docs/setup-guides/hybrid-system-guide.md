# ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ã‚¬ã‚¤ãƒ‰

## æ¦‚è¦

**Yahoo Financeï¼ˆç„¡æ–™ï¼‰ + Interactive Brokersï¼ˆå–å¼•ç”¨ï¼‰**ã®ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šã€ã‚³ã‚¹ãƒˆã‚’æœ€å°åŒ–ã—ãªãŒã‚‰æ­£ç¢ºãªå–å¼•ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
       â”‚             â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”    â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
   â”‚Yahoo  â”‚    â”‚  IB   â”‚
   â”‚Financeâ”‚    â”‚ API   â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”˜
       â”‚             â”‚
   â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”
   â”‚   ç”¨é€”åˆ¥ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹   â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ éŠ˜æŸ„æ¢ç´¢: Yahoo      â”‚
   â”‚ å±¥æ­´åˆ†æ: Yahoo      â”‚
   â”‚ ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°: Yahoo â”‚
   â”‚ ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ : ä¸¡æ–¹    â”‚
   â”‚ å–å¼•åŸ·è¡Œ: IB         â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ç”¨é€”åˆ¥ã®ä½¿ã„åˆ†ã‘

### Yahoo Finance API ã‚’ä½¿ç”¨ã™ã‚‹å ´é¢

#### âœ… éŠ˜æŸ„ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°

```typescript
// ç„¡æ–™ã§å¤šæ•°ã®éŠ˜æŸ„ã‚’æ¤œç´¢
const candidates = await hybridService.screenStocks({
  minPrice: 50,
  maxPrice: 200,
  minVolume: 5000000,
});
```

**ç†ç”±:**

- ç„¡æ–™ã§åˆ¶é™ãªã—
- å¤šæ•°ã®éŠ˜æŸ„ã‚’ä¸€æ‹¬æ¤œç´¢å¯èƒ½
- IBã ã¨èª²é‡‘å¯¾è±¡ã«ãªã‚‹

#### âœ… å±¥æ­´ãƒ‡ãƒ¼ã‚¿åˆ†æ

```typescript
// éå»20å¹´åˆ†ã®ãƒ‡ãƒ¼ã‚¿ã‚’ç„¡æ–™å–å¾—
const historical = await hybridService.getHistoricalData(
  'AAPL',
  new Date('2020-01-01'),
  new Date()
);
```

**ç†ç”±:**

- å®Œå…¨ç„¡æ–™
- é•·æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ãŒå–å¾—å¯èƒ½
- ãƒãƒƒã‚¯ãƒ†ã‚¹ãƒˆã«æœ€é©

#### âœ… ä¼æ¥­æƒ…å ±ãƒ»ãƒ•ã‚¡ãƒ³ãƒ€ãƒ¡ãƒ³ã‚¿ãƒ«åˆ†æ

```typescript
// ä¼æ¥­æƒ…å ±ã‚’ç„¡æ–™å–å¾—
const companyInfo = await hybridService.getCompanyInfo('AAPL');
const trending = await hybridService.getTrendingStocks();
```

**ç†ç”±:**

- å®Œå…¨ç„¡æ–™
- è±Šå¯Œãªä¼æ¥­æƒ…å ±
- ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã«æœ‰ç”¨

### Interactive Brokers API ã‚’ä½¿ç”¨ã™ã‚‹å ´é¢

#### âœ… å®Ÿå–å¼•ã®åŸ·è¡Œ

```typescript
// æ­£ç¢ºãªä¾¡æ ¼ã§å–å¼•åŸ·è¡Œ
await ibIntegration.placeOrder({
  symbol: 'AAPL',
  side: 'buy',
  quantity: 100,
  type: 'market',
});
```

**ç†ç”±:**

- å”¯ä¸€ã®é¸æŠè‚¢
- æ­£ç¢ºãªç´„å®šä¾¡æ ¼
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŸ·è¡Œ

#### âœ… ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¿æƒ…å ±

```typescript
// è²·æ°—é…ãƒ»å£²æ°—é…ã‚’å–å¾—
const marketData = await ibIntegration.getMarketData('AAPL');
console.log(marketData.bid, marketData.ask);
```

**ç†ç”±:**

- æ¿æƒ…å ±ãŒå¿…è¦
- Yahoo Financeã«ã¯ãªã„æƒ…å ±
- ãƒ‡ã‚¤ãƒˆãƒ¬ãƒ¼ãƒ‰ã«å¿…é ˆ

## æ¨å¥¨ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### Phase 1: é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆï¼ˆç¾åœ¨ï¼‰

```typescript
// Yahoo Financeä¸­å¿ƒã§é–‹ç™º
const config = {
  mode: 'development',
  dataSource: {
    screening: 'yahoo', // ç„¡æ–™
    historical: 'yahoo', // ç„¡æ–™
    realtime: 'yahoo', // ç„¡æ–™
    trading: 'ib', // ãƒ¢ãƒƒã‚¯API
  },
};
```

**ã‚³ã‚¹ãƒˆ: $0/æœˆ**

### Phase 2: æœ¬æ ¼é‹ç”¨æº–å‚™

```typescript
// IBã®ãƒšãƒ¼ãƒ‘ãƒ¼ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§æ¤œè¨¼
const config = {
  mode: 'staging',
  dataSource: {
    screening: 'yahoo', // ç„¡æ–™ï¼ˆå¼•ãç¶šãï¼‰
    historical: 'yahoo', // ç„¡æ–™ï¼ˆå¼•ãç¶šãï¼‰
    realtime: 'ib', // IBå®ŸAPIä½¿ç”¨é–‹å§‹
    trading: 'ib', // IBå®ŸAPI
  },
};
```

**ã‚³ã‚¹ãƒˆ: $0-10/æœˆ**ï¼ˆå¸‚å ´ãƒ‡ãƒ¼ã‚¿æ–™é‡‘ã€å–å¼•ã™ã‚Œã°ç„¡æ–™ï¼‰

### Phase 3: æœ¬æ ¼é‹ç”¨

```typescript
// æœ¬ç•ªç’°å¢ƒ
const config = {
  mode: 'production',
  dataSource: {
    screening: 'yahoo', // ç„¡æ–™ï¼ˆå¼•ãç¶šãï¼‰
    historical: 'yahoo', // ç„¡æ–™ï¼ˆå¼•ãç¶šãï¼‰
    realtime: 'ib', // IBå®ŸAPI
    trading: 'ib', // IBå®ŸAPI
  },
};
```

**ã‚³ã‚¹ãƒˆ: $0-10/æœˆ**ï¼ˆæœˆé–“å–å¼•æ‰‹æ•°æ–™$30ä»¥ä¸Šã§å¸‚å ´ãƒ‡ãƒ¼ã‚¿ç„¡æ–™ï¼‰

## å®Ÿè£…ä¾‹

### åŸºæœ¬çš„ãªä½¿ç”¨æ–¹æ³•

```typescript
import { HybridMarketDataService } from './services/hybrid-market-data-service';
import { InteractiveBrokersIntegration } from './brokers/interactive-brokers-integration';

// åˆæœŸåŒ–
const ibIntegration = new InteractiveBrokersIntegration(config);
await ibIntegration.connect();

const hybridService = new HybridMarketDataService(
  {
    mode: 'development',
    dataSource: {
      screening: 'yahoo',
      historical: 'yahoo',
      realtime: 'yahoo',
      trading: 'ib',
    },
    yahoo: { enabled: true, cacheTTL: 60000 },
    ib: { enabled: true, useRealAPI: false },
  },
  ibIntegration
);

await hybridService.initialize();

// ä½¿ç”¨ä¾‹
// 1. Yahoo Financeã§å€™è£œã‚’æ¢ã™
const candidates = await hybridService.screenStocks({
  minPrice: 50,
  maxPrice: 200,
  minVolume: 5000000,
});

// 2. Yahoo Financeã§è©³ç´°åˆ†æ
for (const symbol of candidates) {
  const quote = await hybridService.getMarketData(symbol);
  const historical = await hybridService.getHistoricalData(symbol, startDate);
  // åˆ†æãƒ­ã‚¸ãƒƒã‚¯...
}

// 3. Interactive Brokersã§å–å¼•
await ibIntegration.placeOrder({
  symbol: bestSymbol,
  side: 'buy',
  quantity: 100,
  type: 'market',
});
```

## ã‚³ã‚¹ãƒˆæ¯”è¼ƒ

### Yahoo Finance ã®ã¿

- **æœˆé¡ã‚³ã‚¹ãƒˆ**: $0
- **åˆ¶é™**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ä½ã€å–å¼•ä¸å¯
- **ç”¨é€”**: åˆ†æã®ã¿

### Interactive Brokers ã®ã¿

- **æœˆé¡ã‚³ã‚¹ãƒˆ**: $10-30
- **åˆ¶é™**: ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã§èª²é‡‘
- **ç”¨é€”**: å…¨ã¦å¯èƒ½ã ãŒã‚³ã‚¹ãƒˆé«˜

### ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ï¼ˆæ¨å¥¨ï¼‰

- **æœˆé¡ã‚³ã‚¹ãƒˆ**: $0-10ï¼ˆå–å¼•ã™ã‚Œã°$0ï¼‰
- **åˆ¶é™**: ãªã—
- **ç”¨é€”**: åˆ†æã¯ç„¡æ–™ã€å–å¼•ã¯æ­£ç¢º

## ãƒ¡ãƒªãƒƒãƒˆ

### ã‚³ã‚¹ãƒˆå‰Šæ¸›

- âœ… Yahoo Financeã§åˆ†æã¯ç„¡æ–™
- âœ… IBã¯å–å¼•æ™‚ã®ã¿ä½¿ç”¨
- âœ… æœˆé–“å–å¼•ã™ã‚Œã°IBå¸‚å ´ãƒ‡ãƒ¼ã‚¿ã‚‚ç„¡æ–™

### ç²¾åº¦å‘ä¸Š

- âœ… Yahoo Financeã§éŠ˜æŸ„æ¢ç´¢ï¼ˆå¤šæ•°ã®éŠ˜æŸ„ã‚’ç„¡æ–™ã§ï¼‰
- âœ… IBã§æ­£ç¢ºãªå–å¼•åŸ·è¡Œï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¿æƒ…å ±ï¼‰

### æŸ”è»Ÿæ€§

- âœ… ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã‚’ç”¨é€”åˆ¥ã«åˆ‡ã‚Šæ›¿ãˆå¯èƒ½
- âœ… é–‹ç™ºæ™‚ã¯Yahooã€æœ¬ç•ªæ™‚ã¯IBã«ç°¡å˜åˆ‡ã‚Šæ›¿ãˆ
- âœ… ã©ã¡ã‚‰ã‹ãŒãƒ€ã‚¦ãƒ³ã—ã¦ã‚‚ç¶™ç¶šå¯èƒ½

## æ³¨æ„äº‹é …

### Yahoo Finance

- **é…å»¶**: 15-20åˆ†é…å»¶ã®å¯èƒ½æ€§
- **éå…¬å¼**: APIãŒçªç„¶å¤‰æ›´ã•ã‚Œã‚‹å¯èƒ½æ€§
- **åˆ¶é™**: é«˜é »åº¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯é¿ã‘ã‚‹

### Interactive Brokers

- **æ¥ç¶šå¿…é ˆ**: TWS/IB Gatewayèµ·å‹•ãŒå¿…è¦ï¼ˆæœ¬ç•ªæ™‚ï¼‰
- **å¸‚å ´ãƒ‡ãƒ¼ã‚¿æ–™é‡‘**: å–å¼•ã—ãªã„æœˆã¯èª²é‡‘ã®å¯èƒ½æ€§
- **è¤‡é›‘æ€§**: è¨­å®šãŒè¤‡é›‘

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Yahoo Financeã‚¨ãƒ©ãƒ¼

```
ã‚¨ãƒ©ãƒ¼: "Too many requests"
â†’ è§£æ±ºç­–: ãƒªã‚¯ã‚¨ã‚¹ãƒˆé »åº¦ã‚’ä¸‹ã’ã‚‹ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥TTLã‚’å»¶ã°ã™
```

### IBã‚¨ãƒ©ãƒ¼

```
ã‚¨ãƒ©ãƒ¼: "Market data not subscribed"
â†’ è§£æ±ºç­–: å¸‚å ´ãƒ‡ãƒ¼ã‚¿ã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã€ã¾ãŸã¯Yahooã«åˆ‡ã‚Šæ›¿ãˆ
```

## ã¾ã¨ã‚

ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã‚Šï¼š

- ğŸ’° **ã‚³ã‚¹ãƒˆæœ€å°**: Yahoo Financeã§åˆ†æã¯ç„¡æ–™
- ğŸ¯ **ç²¾åº¦æœ€å¤§**: IBã§æ­£ç¢ºãªå–å¼•åŸ·è¡Œ
- ğŸš€ **æœ€é©ãªãƒãƒ©ãƒ³ã‚¹**: ä¸¡æ–¹ã®é•·æ‰€ã‚’æ´»ç”¨

**é–‹ç™ºæ™‚ã¯Yahoo Financeä¸­å¿ƒã€æœ¬ç•ªæ™‚ã¯IBä¸­å¿ƒã«è‡ªå‹•åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ï¼**
