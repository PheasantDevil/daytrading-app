# 株価API調査・選定

## 調査対象API

### 1. Alpha Vantage API

- **URL**: https://www.alphavantage.co/
- **料金**: 無料プラン（月500回）、有料プラン（月$49.99〜）
- **対応市場**: 米国、日本、欧州、アジア
- **データ種類**: リアルタイム、履歴、技術指標
- **制限**: 無料プランは1分間に5回まで
- **メリット**: 豊富なデータ、日本株対応
- **デメリット**: 無料プランは制限が厳しい

### 2. Yahoo Finance API (非公式)

- **URL**: https://query1.finance.yahoo.com/
- **料金**: 無料
- **対応市場**: 全世界
- **データ種類**: リアルタイム、履歴
- **制限**: レート制限あり
- **メリット**: 完全無料、豊富なデータ
- **デメリット**: 非公式、突然変更される可能性

### 3. IEX Cloud

- **URL**: https://iexcloud.io/
- **料金**: 無料プラン（月500,000回）、有料プラン（月$9〜）
- **対応市場**: 米国中心
- **データ種類**: リアルタイム、履歴、ニュース
- **制限**: 無料プランは1秒間に100回まで
- **メリット**: 高品質なデータ、豊富な機能
- **デメリット**: 日本株の対応が限定的

### 4. Polygon.io

- **URL**: https://polygon.io/
- **料金**: 無料プラン（月5回）、有料プラン（月$99〜）
- **対応市場**: 米国、カナダ
- **データ種類**: リアルタイム、履歴、オプション
- **制限**: 無料プランは制限が厳しい
- **メリット**: 高頻度データ、リアルタイム
- **デメリット**: 高価格、日本株非対応

### 5. 日本株専用API

#### 5.1 KabuステーションAPI

- **URL**: https://kabu.com/
- **料金**: 無料（口座開設必要）
- **対応市場**: 日本
- **データ種類**: リアルタイム、注文
- **制限**: 口座開設が必要
- **メリット**: 公式API、リアルタイム
- **デメリット**: 口座開設が必要

#### 5.2 SBI証券API

- **URL**: https://site2.sbisec.co.jp/
- **料金**: 無料（口座開設必要）
- **対応市場**: 日本
- **データ種類**: リアルタイム、注文
- **制限**: 口座開設が必要
- **メリット**: 公式API
- **デメリット**: 口座開設が必要

## 推奨アプローチ

### 開発フェーズ

1. **Yahoo Finance API (非公式)**: 無料で豊富なデータ
2. **Alpha Vantage API**: 公式API、日本株対応

### 本番フェーズ

1. **Alpha Vantage API**: 有料プラン
2. **証券会社API**: 口座開設後

## 実装方針

### 1. マルチAPI対応

- 複数のAPIを組み合わせて冗長性を確保
- プライマリAPIとフォールバックAPIを設定

### 2. データキャッシュ

- Redisを使用してデータをキャッシュ
- API制限を回避

### 3. エラーハンドリング

- API障害時の自動切り替え
- データ取得失敗時の再試行

### 4. レート制限対応

- リクエスト間隔の制御
- バッチ処理の実装

## 実装予定

### Phase 2.1: 基本データ取得

- Yahoo Finance API実装
- 基本的な株価データ取得

### Phase 2.2: リアルタイム対応

- WebSocket実装
- リアルタイムデータ取得

### Phase 2.3: マルチAPI対応

- Alpha Vantage API追加
- フォールバック機能実装

### Phase 2.4: 最適化

- キャッシュ機能実装
- レート制限対応
